<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant</title>
    <script>
        // Time remaining in seconds (15 minutes = 900 seconds)
        var timeRemaining = 15 * 60;

        // Function to update the countdown timer
        function updateTimer() {
            var minutes = Math.floor(timeRemaining / 60);
            var seconds = timeRemaining % 60;
            // Add leading zero to seconds if needed
            seconds = seconds < 10 ? '0' + seconds : seconds;
            document.getElementById('timer').textContent = minutes + ":" + seconds;
            timeRemaining--;
            
            // Redirect to Qualtrics after 15 minutes
            if (timeRemaining < 0) {
                window.location.href = "https://memphis.co1.qualtrics.com/jfe/form/SV_8nPZ3Pg5TjfIeYS";
            }
        }

        // Start the countdown timer and update every second
        setInterval(updateTimer, 1000);

        // Function to open Vapi in a new tab
        function openVapi() {
            var vapiUrl = "https://vapi.yourwebsite.com"; // Replace with actual Vapi URL
            window.open(vapiUrl, '_blank'); // Open Vapi in a new tab
        }

        // Call openVapi() on page load to open Vapi in a new tab
        window.onload = function() {
            openVapi(); // Open Vapi AI in a new tab when the page loads
        }
    </script>
</head>
<body>
    <h1>Welcome</h1>
    <p>This is where your AI companion will appear.</p>
    
    <!-- Countdown Timer Display -->
    <p>Time remaining: <span id="timer">15:00</span></p>

    <!-- Embedding Vapi.ai Assistant -->
    <script>
        var vapiInstance = null;
        const assistant = "f0d91a7c-6717-4214-abcb-0cb13306631d"; // Substitute with your assistant ID
        const apiKey = "ca4376a0-87d1-444e-ad3f-d056d3e30c1d"; // Substitute with your Public key from Vapi Dashboard.
        const buttonConfig = {}; // Modify this as required

        (function (d, t) {
            var g = document.createElement(t),
            s = d.getElementsByTagName(t)[0];
            g.src = "https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js";
            g.defer = true;
            g.async = true;
            s.parentNode.insertBefore(g, s);

            g.onload = function () {
                vapiInstance = window.vapiSDK.run({
                    apiKey: apiKey, // mandatory
                    assistant: assistant, // mandatory
                    config: buttonConfig, // optional
                });
            };
        })(document, "script");
    </script>
</body>
</html>
